1  æ‰€æœ‰åˆçº¦éƒ¨ç½²é™ˆå…¬å…¬åï¼Œé¦–å…ˆéªŒè¯äº¤æ˜“å¯¹çš„æµåŠ¨æ€§
$ cast call 0xf8d7F2F2138A35f3a477E83c6CaC59ceCFc6D51d "getReserves()" --rpc-url http://localhost:8545
0x00000000000000000000000000000000000000000000152d02c7e14af6800000000000000000000000
00000000000000000000000000152d02c7e14af680000000000000000000000000000000000000000000
000000000000000000683c3a8d

è§£æç»“æœï¼š

- Reserve0 : 0x152d02c7e14af6800000 = 100,000,000,000,000,000,000,000 wei = 100,000 tokens
- Reserve1 : 0x152d02c7e14af6800000 = 100,000,000,000,000,000,000,000 wei = 100,000 tokens
- Timestamp : 0x683c3a8d
PairA ä»·æ ¼æ¯”ä¾‹ : 1:1 (TokenA:TokenB)

$ cast call 0xA43F71AE864dA7AdA5B597aD8Ec43381Fd9F96B7 "getReserves()" --rpc-url http://localhost:8545
0x00000000000000000000000000000000000000000000152d02c7e14af6800000000000000000000000
0000000000000000000000000069e10de76676d080000000000000000000000000000000000000000000
000000000000000000683c3a8d

è§£æç»“æœï¼š

- Reserve0 : 0x152d02c7e14af6800000 = 100,000,000,000,000,000,000,000 wei = 100,000 tokens
- Reserve1 : 0x69e10de76676d0800000 = 500,000,000,000,000,000,000,000 wei = 500,000 tokens
- Timestamp : 0x683c3a8d
PairB ä»·æ ¼æ¯”ä¾‹ : 1:5 (TokenA:TokenB)

## å¥—åˆ©æœºä¼šç¡®è®¤ âœ…
æµåŠ¨æ€§çŠ¶æ€ : ä¸¤ä¸ªäº¤æ˜“å¯¹éƒ½æœ‰å……è¶³çš„æµåŠ¨æ€§ï¼

ä»·æ ¼å·®å¼‚ :

- PairA: 1 TokenA = 1 TokenB
- PairB: 1 TokenA = 5 TokenB
å¥—åˆ©ç­–ç•¥ :

1. ä» PairA é—ªç”µè´·å€Ÿå‡º TokenA
2. åœ¨ PairB ç”¨ TokenA æ¢å– TokenB (è·å¾—5å€TokenB)
3. åœ¨ PairA ç”¨éƒ¨åˆ† TokenB æ¢å› TokenA å¿è¿˜é—ªç”µè´·
4. å‰©ä½™çš„ TokenB å°±æ˜¯åˆ©æ¶¦



2ã€ æ‰§è¡Œé—ªç”µå…‘å…‘æ¢å’Œå¥—åˆ©çš„å‘½ä»¤å’ŒæˆåŠŸæ—¥å¿—
Administrator@MS-CEVXSRKPSHOI MINGW64 /d/uniswapV2 (master)
$ cast send 0xA15BB66138824a1c7167f5E85b957d04Dd34E468 "startArbitrage(uint256)" 1000000000000000000 --private-key 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80 --rpc-url http://localhost:8545

blockHash            0xa81126a94f240d52242475f442ac93c411d05e3c54e41fd907e1c56071742
f24
blockNumber          17
contractAddress
cumulativeGasUsed    274228
effectiveGasPrice    142410880
from                 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
gasUsed              274228
logs                 [{"address":"0x5fbdb2315678afecb367f032d93f642f64180aa3","topic
s":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x00000000
0000000000000000f8d7f2f2138a35f3a477e83c6cac59cecfc6d51d","0x00000000000000000000000
0a15bb66138824a1c7167f5e85b957d04dd34e468"],"data":"0x000000000000000000000000000000
0000000000000000000de0b6b3a7640000","blockHash":"0xa81126a94f240d52242475f442ac93c41
1d05e3c54e41fd907e1c56071742f24","blockNumber":"0x11","blockTimestamp":"0x683c3d27",
"transactionHash":"0x1de1312102715d2969e164ef2ac393ed8d9ca47a56490b5adc026971a65b387
d","transactionIndex":"0x0","logIndex":"0x0","removed":false},{"address":"0x5fbdb231
5678afecb367f032d93f642f64180aa3","topics":["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd031
4c0f7b2291e5b200ac8c7c3b925","0x000000000000000000000000a15bb66138824a1c7167f5e85b95
7d04dd34e468","0x0000000000000000000000005fc8d32690cc91d4c39d9d3abcbd16989f875707"],
"data":"0x0000000000000000000000000000000000000000000000000de0b6b3a7640000","blockHa
sh":"0xa81126a94f240d52242475f442ac93c411d05e3c54e41fd907e1c56071742f24","blockNumbe
r":"0x11","blockTimestamp":"0x683c3d27","transactionHash":"0x1de1312102715d2969e164e
f2ac393ed8d9ca47a56490b5adc026971a65b387d","transactionIndex":"0x0","logIndex":"0x1"
,"removed":false},{"address":"0x5fbdb2315678afecb367f032d93f642f64180aa3","topics":[
"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000
000000000000a15bb66138824a1c7167f5e85b957d04dd34e468","0x000000000000000000000000a43
f71ae864da7ada5b597ad8ec43381fd9f96b7"],"data":"0x0000000000000000000000000000000000
000000000000000de0b6b3a7640000","blockHash":"0xa81126a94f240d52242475f442ac93c411d05
e3c54e41fd907e1c56071742f24","blockNumber":"0x11","blockTimestamp":"0x683c3d27","tra
nsactionHash":"0x1de1312102715d2969e164ef2ac393ed8d9ca47a56490b5adc026971a65b387d","
transactionIndex":"0x0","logIndex":"0x2","removed":false},{"address":"0xe7f1725e7734
ce288f8367e1bb143e90bb3f0512","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f16
3c4a11628f55a4df523b3ef","0x000000000000000000000000a43f71ae864da7ada5b597ad8ec43381
fd9f96b7","0x000000000000000000000000a15bb66138824a1c7167f5e85b957d04dd34e468"],"dat
a":"0x000000000000000000000000000000000000000000000000452e19e2f1307fc2","blockHash":
"0xa81126a94f240d52242475f442ac93c411d05e3c54e41fd907e1c56071742f24","blockNumber":"
0x11","blockTimestamp":"0x683c3d27","transactionHash":"0x1de1312102715d2969e164ef2ac
393ed8d9ca47a56490b5adc026971a65b387d","transactionIndex":"0x0","logIndex":"0x3","re
moved":false},{"address":"0xa43f71ae864da7ada5b597ad8ec43381fd9f96b7","topics":["0x1
c411e9a96e071241c2f21f7726b17ae89e3cab4c78be50e062b03a9fffbbad1"],"data":"0x00000000
000000000000000000000000000000000000152d10a897fe9de400000000000000000000000000000000
000000000000000069e0c8b94c93df4f803e","blockHash":"0xa81126a94f240d52242475f442ac93c
411d05e3c54e41fd907e1c56071742f24","blockNumber":"0x11","blockTimestamp":"0x683c3d27
","transactionHash":"0x1de1312102715d2969e164ef2ac393ed8d9ca47a56490b5adc026971a65b3
87d","transactionIndex":"0x0","logIndex":"0x4","removed":false},{"address":"0xa43f71
ae864da7ada5b597ad8ec43381fd9f96b7","topics":["0xd78ad95fa46c994b6551d0da85fc275fe61
3ce37657fb8d5e3d130840159d822","0x0000000000000000000000005fc8d32690cc91d4c39d9d3abc
bd16989f875707","0x000000000000000000000000a15bb66138824a1c7167f5e85b957d04dd34e468"
],"data":"0x0000000000000000000000000000000000000000000000000de0b6b3a764000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000
452e19e2f1307fc2","blockHash":"0xa81126a94f240d52242475f442ac93c411d05e3c54e41fd907e
1c56071742f24","blockNumber":"0x11","blockTimestamp":"0x683c3d27","transactionHash":
"0x1de1312102715d2969e164ef2ac393ed8d9ca47a56490b5adc026971a65b387d","transactionInd
ex":"0x0","logIndex":"0x5","removed":false},{"address":"0xe7f1725e7734ce288f8367e1bb
143e90bb3f0512","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4
df523b3ef","0x000000000000000000000000a15bb66138824a1c7167f5e85b957d04dd34e468","0x0
00000000000000000000000f8d7f2f2138a35f3a477e83c6cac59cecfc6d51d"],"data":"0x00000000
00000000000000000000000000000000000000000df62980983a27f1","blockHash":"0xa81126a94f2
40d52242475f442ac93c411d05e3c54e41fd907e1c56071742f24","blockNumber":"0x11","blockTi
mestamp":"0x683c3d27","transactionHash":"0x1de1312102715d2969e164ef2ac393ed8d9ca47a5
6490b5adc026971a65b387d","transactionIndex":"0x0","logIndex":"0x6","removed":false},
{"address":"0xf8d7f2f2138a35f3a477e83c6cac59cecfc6d51d","topics":["0x1c411e9a96e0712
41c2f21f7726b17ae89e3cab4c78be50e062b03a9fffbbad1"],"data":"0x0000000000000000000000
0000000000000000000000152cf4e72a974f1c0000000000000000000000000000000000000000000000
00152d10be0acb8eba27f1","blockHash":"0xa81126a94f240d52242475f442ac93c411d05e3c54e41
fd907e1c56071742f24","blockNumber":"0x11","blockTimestamp":"0x683c3d27","transaction
Hash":"0x1de1312102715d2969e164ef2ac393ed8d9ca47a56490b5adc026971a65b387d","transact
ionIndex":"0x0","logIndex":"0x7","removed":false},{"address":"0xf8d7f2f2138a35f3a477
e83c6cac59cecfc6d51d","topics":["0xd78ad95fa46c994b6551d0da85fc275fe613ce37657fb8d5e
3d130840159d822","0x000000000000000000000000a15bb66138824a1c7167f5e85b957d04dd34e468
","0x000000000000000000000000a15bb66138824a1c7167f5e85b957d04dd34e468"],"data":"0x00
000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000df62980983a27f1000000000000000000000000000000000000000000
0000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000000000
00","blockHash":"0xa81126a94f240d52242475f442ac93c411d05e3c54e41fd907e1c56071742f24"
,"blockNumber":"0x11","blockTimestamp":"0x683c3d27","transactionHash":"0x1de13121027
15d2969e164ef2ac393ed8d9ca47a56490b5adc026971a65b387d","transactionIndex":"0x0","log
Index":"0x8","removed":false}]
logsBloom            0x0020000000800000000000008000000000000000000000000000000000000
000000200000000000000000000000000005000000000000000000000004020000000000000000000000
000000800000020000000000000000400000000001000000000004000000000000000000000000000000
000000000000000001000000000000000000000000000000000000000000000000000000008000000420
000100112004000000100000000010800000000000000000000000000000010000000000000004200000
000020000000000100000000000000000100000000000000000001000000000000020000000000000000
0000000000000800000000000000000
root
status               1 (success)
transactionHash      0x1de1312102715d2969e164ef2ac393ed8d9ca47a56490b5adc026971a65b3
87d
transactionIndex     0
type                 2
blobGasPrice         1
blobGasUsed
to                   0xA15BB66138824a1c7167f5E85b957d04Dd34E468


3ã€AIåˆ†æï¼š
## æµ‹è¯•ç»“æœåˆ†æ âœ… æˆåŠŸï¼
ä»æ—¥å¿—æ¥çœ‹ï¼Œä½ çš„é—ªç”µè´·å¥—åˆ©æµ‹è¯• å®Œå…¨æˆåŠŸ äº†ï¼è®©æˆ‘æ¥è¯¦ç»†åˆ†æä¸€ä¸‹ï¼š

### äº¤æ˜“æ‰§è¡ŒçŠ¶æ€
- Status : 1 (success) - äº¤æ˜“æˆåŠŸæ‰§è¡Œ
- Gas Used : 274,228 - åˆç†çš„gasæ¶ˆè€—
- Contract Address : 0xA15BB66138824a1c7167f5E85b957d04Dd34E468 - è¿™æ˜¯ä½ ä¿®å¤åé‡æ–°éƒ¨ç½²çš„åˆçº¦åœ°å€
### ä»£å¸è½¬ç§»åˆ†æï¼ˆä»logsè§£æï¼‰
ç¬¬1æ­¥ï¼šé—ªç”µè´·å€Ÿå‡ºTokenA

- ä» PairA (0xf8d7...) è½¬å‡º 1 TokenA åˆ°å¥—åˆ©åˆçº¦
- Log Index 0: TokenAè½¬ç§»äº‹ä»¶
ç¬¬2æ­¥ï¼šåœ¨PairBäº¤æ¢TokenAâ†’TokenB

- å¥—åˆ©åˆçº¦æ‰¹å‡† RouterB ä½¿ç”¨TokenA
- åœ¨ PairB (0xA43F...) ç”¨ 1 TokenA æ¢å– ~4.98 TokenB
- Log Index 3: æ”¶åˆ° 0x452e19e2f1307fc2 wei â‰ˆ 4.98 TokenB
ç¬¬3æ­¥ï¼šå¿è¿˜é—ªç”µè´·

- ç”¨éƒ¨åˆ†TokenBåœ¨PairAæ¢å›TokenAå¿è¿˜é—ªç”µè´·
- Log Index 6: è½¬ç§» 0xdf62980983a27f1 wei â‰ˆ 1.003 TokenA ç»™PairA
- æˆåŠŸå¿è¿˜äº†æœ¬é‡‘+æ‰‹ç»­è´¹
### å¥—åˆ©åˆ©æ¶¦è®¡ç®—
ä»äº¤æ˜“æ—¥å¿—å¯ä»¥çœ‹å‡ºï¼š

- å€Ÿå…¥ : 1 TokenA
- è·å¾— : ~4.98 TokenB (ä»PairB)
- å¿è¿˜ : ~1.003 TokenA (ç»™PairA)
- å‡€åˆ©æ¶¦ : çº¦ 3.97 TokenB
### æµåŠ¨æ€§æ± çŠ¶æ€æ›´æ–°
ä»Syncäº‹ä»¶å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ± å­çš„å‚¨å¤‡é‡éƒ½æ­£ç¡®æ›´æ–°äº†ï¼š

- PairA : å‚¨å¤‡é‡ä» (100000, 100000) å˜ä¸ºç•¥æœ‰è°ƒæ•´
- PairB : å‚¨å¤‡é‡ä¹Ÿç›¸åº”è°ƒæ•´
## ç»“è®º
ğŸ‰ å¥—åˆ©æµ‹è¯•å®Œå…¨æˆåŠŸï¼

1. âœ… é—ªç”µè´·æœºåˆ¶æ­£å¸¸å·¥ä½œ
2. âœ… é‡å…¥é”å®šé—®é¢˜å·²è§£å†³
3. âœ… ä»·æ ¼å·®å¼‚å¥—åˆ©æˆåŠŸæ‰§è¡Œ
4. âœ… è·å¾—äº†çº¦3.97ä¸ªTokenBçš„åˆ©æ¶¦
5. âœ… æ‰€æœ‰åˆçº¦äº¤äº’æ­£å¸¸
ä½ çš„ä¿®å¤æ˜¯æ­£ç¡®çš„ï¼Œåˆçº¦ç°åœ¨å¯ä»¥æ­£å¸¸è¿›è¡Œé—ªç”µè´·å¥—åˆ©äº†ï¼å¯ä»¥å°è¯•ç”¨æ›´å¤§çš„é‡‘é¢æ¥è·å¾—æ›´å¤šåˆ©æ¶¦ï¼Œæˆ–è€…åœ¨çœŸå®ç¯å¢ƒä¸­éƒ¨ç½²ä½¿ç”¨ã€‚


4ã€è‡ªå·±éªŒè¯
1. æ£€æŸ¥å¥—åˆ©åˆçº¦çš„ä»£å¸ä½™é¢
-æŸ¥çœ‹åˆçº¦çš„TokenAä½™é¢ï¼š

$ cast call 0x5FbDB2315678afecb367f032d93F642f64180aa3 "balanceOf(address)" 0xA15BB66138824a1c7167f5E85b957d04Dd34E468 --rpc-url http://localhost:8545
0x0000000000000000000000000000000000000000000000000000000000000000

tokenAæ˜¯0


$ cast call 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512 "balanceOf(address)" 0xA15BB66138824a1c7167f5E85b957d04Dd34E468 --rpc-url http://localhost:8545
0x0000000000000000000000000000000000000000000000003737f06258f657d1

tokenBæ˜¯â‰ˆ 3.997 TokenB


2.æ£€æŸ¥ä¸¤ä¸ªæµåŠ¨æ€§æ± çš„å‚¨å¤‡é‡å˜åŒ–
æŸ¥çœ‹PairAçš„å‚¨å¤‡é‡ï¼š
$ cast call 0xf8d7F2F2138A35f3a477E83c6CaC59ceCFc6D51d "getReserves()" --rpc-url http://localhost:8545
0x00000000000000000000000000000000000000000000152cf4e72a974f1c0000000000000000000000
00000000000000000000000000152d10be0acb8eba27f100000000000000000000000000000000000000
000000000000000000683c3d27

## æµåŠ¨æ€§æ± åˆ†æ
### PairA (0xf8d7F2F2138A35f3a477E83c6CaC59ceCFc6D51d)
- Reserve0 : 0x152cf4e72a974f1c0000 = 99,999,999,999,999,999,999,999 wei â‰ˆ 99,999.999 TokenA
- Reserve1 : 0x152d10be0acb8eba27f100 = 100,000,000,000,000,000,000,001 wei â‰ˆ 100,000.000 TokenB
- ä»·æ ¼æ¯”ä¾‹ : çº¦ 1:1 (TokenA : TokenB)
- æ—¶é—´æˆ³ : 0x683c3d27


$ cast call 0xA43F71AE864dA7AdA5B597aD8Ec43381Fd9F96B7 "getReserves()" --rpc-url http://localhost:8545
0x00000000000000000000000000000000000000000000152d10a897fe9de40000000000000000000000
0000000000000000000000000069e0c8b94c93df4f803e00000000000000000000000000000000000000
000000000000000000683c3d27

### PairB (0xA43F71AE864dA7AdA5B597aD8Ec43381Fd9F96B7)
- Reserve0 : 0x152d10a897fe9de40000 = 100,000,000,000,000,000,000,000 wei = 100,000 TokenA
- Reserve1 : 0x69e0c8b94c93df4f803e00 = 500,000,000,000,000,000,000,000 wei = 500,000 TokenB
- ä»·æ ¼æ¯”ä¾‹ : 1:5 (TokenA : TokenB)
- æ—¶é—´æˆ³ : 0x683c3d27


## å¥—åˆ©åçš„å˜åŒ–åˆ†æ
ä¸ä¹‹å‰çš„åˆå§‹çŠ¶æ€ç›¸æ¯”ï¼š

PairA å˜åŒ– :

- åˆå§‹: 100,000 TokenA : 100,000 TokenB (1:1)
- ç°åœ¨: çº¦ 100,000 TokenA : 100,000 TokenB (åŸºæœ¬æ— å˜åŒ–)

PairB å˜åŒ– :
- åˆå§‹: 100,000 TokenA : 500,000 TokenB (1:5)
- ç°åœ¨: 100,000 TokenA : 500,000 TokenB (åŸºæœ¬æ— å˜åŒ–)
## ç»“è®º
1. æµåŠ¨æ€§å……è¶³ : ä¸¤ä¸ªæ± å­éƒ½ä¿æŒäº†å……è¶³çš„æµåŠ¨æ€§
2. ä»·æ ¼å·®å¼‚ä¾ç„¶å­˜åœ¨ : PairA (1:1) vs PairB (1:5) çš„ä»·æ ¼å·®å¼‚ä»ç„¶æ˜¾è‘—
3. å¥—åˆ©å½±å“å¾®å° : ç”±äºå¥—åˆ©é‡‘é¢è¾ƒå°(1 TokenA)ï¼Œå¯¹æ•´ä½“æµåŠ¨æ€§æ± çš„å½±å“å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡
4. ç»§ç»­å¥—åˆ©æœºä¼š : ä»·æ ¼å·®å¼‚ä»ç„¶å­˜åœ¨ï¼Œå¯ä»¥ç»§ç»­è¿›è¡Œæ›´å¤§é‡‘é¢çš„å¥—åˆ©æ“ä½œ
å»ºè®®å¯ä»¥å°è¯•æ›´å¤§é‡‘é¢çš„å¥—åˆ©ï¼Œæ¯”å¦‚ 10 TokenA æˆ– 100 TokenAï¼Œè¿™æ ·ä¼šå¯¹ä»·æ ¼äº§ç”Ÿæ›´æ˜æ˜¾çš„å½±å“ï¼ŒåŒæ—¶è·å¾—æ›´å¤šåˆ©æ¶¦ã€‚

